---
Title: 类型笔记
Tags: 编程
PublishDate: 2019/7/13 22:21:53
---

## 类型系统

#### 标明类型系统（Nominal Type System）

```c#
public class Foo  
{
    public string Name { get; set; }
    public int Id { get; set;}
}

public class Bar  
{
    public string Name { get; set; }
    public int Id { get; set; }
}

Foo foo = new Foo(); // Okay.
Bar bar = new Foo(); // Error!!!
```

#### 结构类型系统（Structural Type System）

```typescript
class Foo {
  method(input: string): number { ... }
}

class Bar {
  method(input: string): number { ... }
}

const foo: Foo = new Foo(); // Okay.
const bar: Bar = new Foo(); // Okay.
```

**区别：** 标明类型系统比较的是类型本身，一致性要求高，结构类型系统比较的是类型的形状，即类型要满足的约束，若果两个类型满足相同的约束，那他们就是相同的类型，俗称鸭子类型，一个东西看上去和鸭子一样，行为和鸭子一样那它就是鸭子。

**优缺点：**前者更严格，后者更灵活，适用于各种偏函数式的语言比如 JS 。


#### 泛型（Generics）

泛型可以类比为类型层面的函数声明，接受一个类型参数 -> 返回一个类型，足够强的类型系统是图灵完备的，可以进行编程，比如 TypeScript 中就有人用类型系统写素数判断的程序。

#### 协变与逆变

- **子类型**（subtype）子类型可以隐性的转换为父类型，比如 int 就是 flot 的子类型，即 int ≦ float。
- **协变**（covariant）如果它保持了子类型序关系≦，该序关系是：子类型≦基类型。
- **逆变**（contravariant）如果它逆转了子类型序关系。

大部分语言允许协变，即子类型允许转换为父类型，除了函数参数以外逆变一般是不允许的。

>[应该怎么理解编程语言中的协变逆变？](https://www.zhihu.com/question/38861374/answer/94657943)
>
>[浅谈 TypeScript 类型系统](https://zhuanlan.zhihu.com/p/64446259)
>
>[TypeScript Type-Level Programming](https://zhuanlan.zhihu.com/p/54182787)
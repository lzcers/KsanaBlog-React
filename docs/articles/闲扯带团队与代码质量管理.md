---
Title: 闲扯带团队与代码质量管理
Tags: 编码 | 随想
PublishDate: 2018/9/12 22:45
---

## 团队

这是我第一次正儿巴经担任技术 Leader 角色，“我们需要一个能力强一点的，能带团队的人”，一开始我本以为自己只要干好自己的事情，然后顺带帮忙解决下队友遇到的技术问题就好。显然，我有些天真了，当我看到我的KPI 里包含团队产出的指标时，我就开始认真严肃思考带团队这一回事了，从干好自己的活，到带领团队干好活，这并不容易，关于如何带团队，我有阅读过一些书籍，有的讲管理方法和流程，有的讲什么领导力，但是这都不能解决我所面临的现状，或者说很难落地。

仔细思考一下，带团队这件事情并不仅仅意味着管理，那些所谓的管理多数是面向 Boss 来说的，作为一个技术 Leader 而非 Boss，我要做的很简单，那就是带领团队完成任务，并将其尽可做得更好，单纯通过管理手段并不能完成任务，所以**考虑怎么管好不如考虑怎么做好**，带团队就得深入项目里干活，作为榜样，作为火车头拉动整列车，而不是坐在头等舱里等着项目收获。

怎么把事情做好？我当然相信自己能做好，这是出于对自身技术能力的自信，那么问题来了，怎么让整个团队都把事情做好？我想有几点是尤为重要的：

1. **清晰、明确、合理**的任务分配与目标
2. **赋能！赋能！赋能！**
3. 规范与流程

关于任务分配与管理，这不用多讲，有诸多方法论和工具来做，但是光是分配任务而不能驱动成员完成也是扯淡的。再一个就是规范和流程的重要性，我曾以为规范与流程阻碍效率，但是没有规范和流程，效率会更加惨淡，规范和流程怎么来？从优秀实践来，我们做事总会积累些好的经验和实践，这些都可以文档化变成 CheckList 或是规范或是流程，然后用 IT 工具来承载运作。

带团队还有一项最重要的事情，那就是赋能！赋能！赋能！重要事情说三遍，怎么赋能？似乎都会想到培训，这是一种办法没错，但还有相对简单的，把赋能比作对一个人施加影响进行改造，那**怎么改变一个人？两个方面着手，改变他的思想进而影响行为或是改变他的行为进而影响思想**。双管齐下最可怕了，这就像宗教，有经文负责思想改造，有戒律承担行为改造，传销也是这样的路子，软禁 + 洗脑，等等，这有些扯远了，我想讲的是带团队和赋能，中国的师傅们带徒弟总是讲究**言传身教**，赋能也可以这样，结对编程，解答技术疑惑，处理疑难技术问题。还有更简单的，从改变行为着手，用规范和流程去约束行为以养成好的习惯，进而达到赋能的目的。

## 代码质量管理

对于从事软件开发而言，把事情做好的第一步就是把代码写好，那就意味着必须对代码的质量进行把控。

### Why

* 把控代码质量、避免腐烂滋生、技术债累积
* 保证规范与标准落实到位
* 赋能

质量控制是一个长期的，持续的过程，无论在什么工程领域中，关于质量控制都是非常重要的环节，视项目差异与质量要求，测试阶段在整个软件生命周期中所占的比例通常都是很高的，但是**软件的质量不能完全寄托于测试**来把控，在开发阶段我们也可以通过一些列措施来提高质量，比如基于**优秀编码实践制定规范**、**统一风格**、**工具检查**、**例行活动**等。

代码的质量一旦腐烂就会逐步失控，使得开发者背负沉重的技术债务，就像雨天背稻草，越背越重，最终无法迭代开发下去。站在开发者的角度来看，一个结构清晰，代码质量高的项目是大家都乐于维护和开发的，相反愈是糟糕的项目人员就愈不稳定，而项目交付过程中，人员的稳定性至关重要。

### How

#### Code Review

通过使用 Gitlab 之类的代码管理平台，对项目的 develop、maseter 分支开启保护（一般使用 Gitflow 分支模型），在 Merge Request 时进行 Code Review 和讨论，所有 MR 由能力较强的负责人进行 Review 后合入。一个项目这样的负责人可能不止一位，对于团队的新成员或者能力较弱的人员，其**技术导师也可以通过这种方式对其代码质量和能力成长负责。**

通过 MR 的方式实施 Code Review 显然会对项目的开发效率造成一定影响，比如 Review 的负责人处理不过来，大量 MR  积累，重要 MR 未能及时处理，或者干脆 Review 负责人佛系处理，那这样举措就起不到预期的效果了，因此设立多个 Master 负责 Review 是必要的，也可以采用类似同级评审的方式，由相同水平的队员负责 Code Review，这样可以帮助团队成员之间相互学习和共享。

诚然，Code Review 是一个提高代码质量的好方法，但是真正实施起来需要的不仅需要相应的工具提供支撑，也需要由规范和流程约束。因为所有的代码合入都是需要 MR，但是一个大的项目每天的 MR 可能会很多，除了增加更多的 master 来 Review 外，还要对 MR 本身进行约束。

1. 确保提 MR 之前自测通过
2. 代码的风格遵循了统一标准（你想逼死强迫症吗）
3. EsLint 跑过了（也可以通过 git hook 之类的自动来做）
4. commit 粒度不大（太大了谁看的过来）
5. MR 说明要写清楚，最好有统一格式 

#### 代码走读

除了 MR 时做 Code Review 还有什么方式把控代码质量？我们每个人都知道好的代码长什么样子，对于代码的审美能力，我想任何一个程序员都是具备的。但是，若是将自己写的业务代码讲给同事听这恐怕就有些难以启齿了，除了使用小黄鸭调试法的时候我们会讲代码，讲自己的思路，其它情况怕是很难做到了，应付工作的事情，大家都懂，但如果是你自己的开源作品，我想你一定不会如此了。

把你的工作当作你自己的作品一般，show 出来，我们可以通过一些例行的活动来进行组织代码走读，随机挑选代码片段由编写者讲解思路和实现，这某种程度上可以避免开发人员交差式的工作，也能在一定程度上提高团队技术氛围和技术追求。

规范，流程这些都是辅助，一旦变得过于形式化就会偏离原本的期望，各种代码质量检查工具都是可以骗过的，因而最重要的是要培养团队的技术氛围，一个有技术追求的团队才能创造一个好的产品，我是如此认为的。